<template lang="pug">
.metamask(@mouseover="hasTails = true" @mouseleave="hasTails = false")
    button.connected(v-if="user")
        span {{`Connected to ${this.user}`}}
    button.connect(v-else @click="getWeb3Data")
        svg(viewBox="0 0 540 330" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMax slice")
            path.tail.tail-1(:class="{visible: hasTails}")
            path.tail.tail-2(:class="{visible: hasTails}")
            path.tail.tail-3(:class="{visible: hasTails}")
            path.tail.tail-4(:class="{visible: hasTails}")
            path.tail.tail-5(:class="{visible: hasTails}")
            path.tail.tail-6(:class="{visible: hasTails}")
            path.tail.tail-7(:class="{visible: hasTails}")
            path.tail.tail-8(:class="{visible: hasTails}")
            path.tail.tail-9(:class="{visible: hasTails}")
            path.kurama(d="M 184.38867,140.94141 175,169.67773 l 6.33398,30.93555 -4.02343,3.0332 5.96093,4.625 -4.54492,3.63868 5.96094,5.53515 -3.72656,2.72852 8.57031,10.23633 c 0,0 -3.61984,11.47554 -12.96484,41.09575 h -0.002 l 12.07227,41.92773 42.24805,-11.82812 0.10109,-42.02348 80.25665,0.1493 -2.11927,41.87218 c 0,0 17.0888,4.79488 42.25189,11.82816 l 12.14453,-41.92969 -13.11328,-41.09375 8.64258,-10.23437 -3.72656,-2.72852 5.96093,-5.53515 -4.61914,-3.63868 5.96094,-4.625 -3.94922,-3.0332 6.33399,-30.93555 -9.46289,-28.73437 v -0.002 l -0.004,0.002 -0.002,0.002 -60.41407,22.96875 h -50.23242 v 0.002 z")
            path.kurama-1.metamask-1(d="m295.12 163.92 60.43-22.974-74.14 56.032z")
            path.kurama-1.metamask-1(d="m244.89 163.92-60.505-22.974 73.544 56.563z")
            path.kurama-1.metamask-1(d="m363.52 271.5-34.649-0.68239-19.746 30.784 42.249 11.828z")
            path.kurama-1.metamask-1(d="m211.14 270.82-34.574 0.68239 12.071 41.929 42.249-11.828z")
            path.kurama-2.metamask-1(d="m257.19 192.96-28.688 25.855-11.773 18.121 41.951 1.8955z")
            path.kurama-2.metamask-1(d="m323.28 236.93-11.848-18.121-29.06-26.386-0.96867 46.403z")
            path.kurama-1.metamask-1(d="m234.31 271.81-3.4276 29.798 25.185-12.511z")
            path.kurama-1.metamask-1(d="m305.62 271.81-21.758 17.287 25.26 12.511z")
            path.kurama-3.metamask-11(d="m285.65 312.9 23.472-11.297-25.26-12.511 2.0118 16.757z")
            path.kurama-3.metamask-11(d="m256.07 289.09-25.185 12.511 23.472 11.297-0.14903-7.0514z")
            path.kurama-3.kurama-8.metamask-3.metamask-8(:class="{'kurama-9': hasTails}" d="m248.55 247.54 6.1846 13.193-21.013-6.2932z")
            path.kurama-3.kurama-8.metamask-3.metamask-8(:class="{'kurama-9': hasTails}" d="m306.29 254.44-21.087 6.2932 6.1846-13.193z")
            path.kurama-4.metamask-2(d="m211.14 271.5 19.746 30.101 3.5766-30.784z")
            path.kurama-4.metamask-2(d="m328.87 271.5-23.323-0.68239 3.5766 30.784z")
            path.kurama-5.metamask-2(d="m291.46 247.54 14.903 6.8998 16.914-17.515-41.876 1.8955 3.8747 21.912z")
            path.kurama-5.metamask-2(d="m258.68 238.82-41.951-1.8955 16.989 17.515 14.903-6.8998 6.1101 13.193z")
            path.kurama-1.metamask-1(d="m233.72 254.44-16.989-17.515 17.585 34.878z")
            path.kurama-1.metamask-1(d="m323.28 236.93-16.914 17.515-0.74514 17.363z")
            path.kurama-1.metamask-1(d="m260.77 252.55-2.0864-13.724-3.9492 21.912 4.9179 25.855z")
            path.kurama-1.metamask-1(d="m285.28 260.74-3.8747-21.912-2.0118 13.648 0.89416 34.12z")
            path.kurama-6.metamask-4(d="m283.86 289.09 21.758-17.287 0.74514-17.363-21.087 6.2932-4.9924 25.855z")
            path.kurama-6.metamask-4(d="m256.07 289.09 3.5766-2.5021-4.9179-25.855-21.013-6.2932 0.59611 17.363z")
            path.kurama-7.metamask-10( d="m254.36 312.9-23.472-11.297 8.1964 6.8239 16.616 11.752h28.538l16.691-11.752 8.1964-6.8239-23.472 11.297 0.22355-7.0514-1.8628-1.6681h-28.091l-1.7138 1.6681z")
            path.kurama-5.metamask-9(d="m280.29 286.59h-20.64l-3.5766 2.5021-1.8628 16.757 1.7138-1.6681h28.091l1.8628 1.6681-2.0118-16.757z")
            path.kurama-4.metamask-5(d="m365.01 169.68-9.4631-28.736-71.682 54.136 27.57 23.732 38.97 11.601 8.6435-10.236-3.7256-2.7296 5.961-5.535-4.6198-3.6394 5.961-4.6251-3.9492-3.0329z")
            path.kurama-4.metamask-5(d="m181.33 200.61-4.0237 3.0329 5.961 4.6251-4.5453 3.6394 5.961 5.535-3.7257 2.7296 8.569 10.236 38.97-11.601 27.57-23.732-71.682-54.136-9.3886 28.736z")
            path.kurama-6.metamask-4(d="m363.52 271.5-13.114-41.095-38.97-11.601 11.848 18.121-17.66 34.878 23.248-0.30329z")
            path.kurama-6.metamask-4(d="m216.73 236.93 11.773-18.121-38.97 11.601-12.965 41.095h34.574l23.174 0.30329z")
            path.kurama-6.metamask-4(d="m259.65 286.59h20.64l0.14903-33.968 0.96866-13.799 2.4589-43.749 11.326-31.163h-50.296l11.177 31.163 2.608 43.749 0.89415 13.799z")
            path.kurama-5.metamask-7(d="m311.43 218.81-27.57-23.732 71.682-54.136-44.112 77.869")
            path.kurama-5.metamask-7(d="m184.39 140.94 71.682 54.136-27.57 23.732-44.112-77.869")
        span {{`Connect ${!isMobile ? 'to Emerald' : 'wallet'}`}}
</template>

<script>
import Mobile from "@/mixins/Mobile.js"
import Web3 from "@/mixins/Web3.js"

import { mapState } from 'pinia'
import { useWeb3Store } from '@/stores/web3'

export default {
    mixins: [ Mobile, Web3 ],
    data() {
        return {
            balance: 0,
            hasTails: false
        }
    },
    computed: {
        ...mapState(useWeb3Store, ['user'])
    },
    async created() {
        await this.getWeb3Data()
    }
}
</script>

<style lang="scss">
.metamask{
    height: 80px;
    background-color: $primary-color;
    border-radius: 25px;
    border: 1px solid $primary-color;
    display: flex;
    cursor: pointer;

    @media (max-width:750px){
        height: 50px;
        border-radius: 15px;
    }
    
    a.balance {
        color: $background-color;
        margin: auto 10px;
        font-size: 18px;
        font-weight: 600;
        font-family: "Roboto", sans-serif;
    }

    button.connect {
        background-color: $background-color;
        color: $primary-color;

        span {
            margin: auto 10px auto auto;
        }
    }

    button.connected {
        background-color: $primary-color;
        color: $background-color;

        span {
            margin: auto;
        }
    }

    button.connect,
    button.connected {
        border-radius: 25px;
        border: 1px solid $primary-color;
        height: 100%;
        display: flex;
        cursor: pointer;

        @media (max-width:750px){
            border-radius: 15px;
        }

        span {
            font-family: "Roboto", sans-serif;
            font-size: 18px;
            font-weight: 600;

            @media (max-width:750px){
                font-size: 14px;
                max-width: 130px;
            }

        }
    }
    

    button.connect svg {
            height: 100%;
            width: 80px;
            transform: translateY(-15px);
            overflow: visible;

            @media (max-width:750px){
                width: 40px;
                transform: translateY(-10px);
            }

            path{
                &.kurama-0 {
                    stroke: #bc3301;
                    stroke-width: 3;
                }

                &.kurama-1 {
                    fill: #d14d01;
                }

                &.kurama-2 {
                    fill: #2f2934;
                }

                &.kurama-3 {
                    fill: #d7c1b3;
                }

                &.kurama-4 {
                    fill: #bc3301;
                }

                &.kurama-5 {
                    fill: #000000;
                }

                &.kurama-6 {
                    fill: #ec6e00;
                }

                &.kurama-7 {
                    fill: #c0ad9e;
                }

                &.kurama-8 {
                    stroke: #000000;
                    stroke-width: 2;
                }

                &.kurama-9 {
                    fill: red
                }

                &.tail {
                    fill: #ec6e00;
                    stroke: #bc3301;
                    stroke-width: 2.5;
                    opacity: 0;
                    transition: opacity 0.5s ease;

                    &.visible {
                        opacity: 1;
                    }

                    &.tail-1 {
                        animation: morph-1 3.5s infinite;
                    }

                    &.tail-2 {
                        animation: morph-2 5s infinite;
                    }

                    &.tail-3 {
                        animation: morph-3 3s infinite;
                    }

                    &.tail-4 {
                        animation: morph-4 2.5s infinite;
                    }

                    &.tail-5 {
                        animation: morph-5 5.5s infinite;
                    }

                    &.tail-6 {
                        animation: morph-6 5s infinite;
                    }

                    &.tail-7 {
                        animation: morph-7 2.5s infinite;
                    }

                    &.tail-8 {
                        animation: morph-8 5s infinite;
                    }

                    &.tail-9 {
                        animation: morph-9 4.5s infinite;
                    }
                }

                @keyframes morph-1 {
                    0%, 100% {
                        d: path('m 201.24,12.89 c 0,0 -18.714,93.824 7.174,127.7 11.939,15.621 43.768,3.2257 55.957,18.652 23.516,29.761 10.044,113.35 10.044,113.35 0,0 49.862,-83.858 35.87,-124.83 -8.626,-25.256 -47.289,-27.007 -64.566,-47.348 C 224.534,75.471 201.24,12.891 201.24,12.891 Z');
                    }
                    50% {
                        d: path('m 175.67814,55.909746 c 0,0 39.89124,24.618931 65.77924,58.494934 11.939,15.621 -20.44838,42.50368 -8.25938,57.92998 23.516,29.761 41.217,100.25734 41.217,100.25734 0,0 30.53474,-66.40112 16.54274,-107.37312 -8.626,-25.256 -8.01102,-81.871485 -25.28802,-102.212485 -21.185,-24.943 -89.99158,-7.096649 -89.99158,-7.096649 z')
                    }
                }

                @keyframes morph-2 {
                    0%, 100% {
                        d: path('m534.12 199.41s-93.824-18.714-127.7 7.174c-15.621 11.939-3.2257 43.768-18.652 55.957-29.761 23.516-113.35 10.044-113.35 10.044s83.858 49.862 124.83 35.87c25.256-8.626 27.007-47.289 47.348-64.566 24.943-21.185 87.523-44.479 87.523-44.479z');
                    }
                    50% {
                        d: path('m501.23 151.09s-34.764 39.002-68.64 64.89c-15.621 11.939-72.351-13.948-87.777-1.7594-29.761 23.516-70.398 58.365-70.398 58.365s48.289-14.566 89.261-28.558c25.256-8.626 84.723 11.77 105.06-5.5074 24.943-21.185 32.491-87.431 32.491-87.431z')
                    }
                }

                @keyframes morph-3 {
                    0%, 100% {
                        d: path('m406.31 37.21s-79.577 53.111-85.223 95.368c-2.6036 19.488 28.667 33.229 26.378 52.757-4.416 37.673-73.048 87.252-73.048 87.252s94.555-24.038 113.63-62.902c11.759-23.958-14.342-52.535-12.175-79.135 2.6571-32.617 30.437-93.339 30.437-93.339z');
                    }
                    50% {
                        d: path('m374.1 27.144s2.3008 53.11-3.3452 95.367c-2.6036 19.488-52.539 37.927-54.828 57.455-4.416 37.673-41.505 92.621-41.505 92.621s49.59-35.447 68.665-74.311c11.759-23.958 61.495-63.273 63.662-89.873 2.6571-32.617-32.648-81.259-32.648-81.259z')
                    }
                }

                @keyframes morph-4 {
                    0%, 100% {
                        d: path('m39.04 140.69s53.111 79.577 95.368 85.223c19.488 2.6036 33.229-28.667 52.757-26.378 37.673 4.416 87.252 73.048 87.252 73.048s-24.038-94.555-62.902-113.63c-23.958-11.759-52.535 14.342-79.135 12.175-32.617-2.6571-93.339-30.437-93.339-30.437z');
                    }
                    50% {
                        d: path('m40.383 187s39.016-33.172 81.273-27.526c19.488 2.6036 31.216 67.303 50.744 69.592 37.673 4.416 102.02 43.519 102.02 43.519s-28.065-48.919-66.929-67.994c-23.958-11.759-57.904-87.668-84.504-89.835-32.617-2.6571-82.601 72.245-82.601 72.245z')
                    }
                }

                @keyframes morph-5 {
                    0%, 100% {
                        d: path('m 5.36,252.52 c 0,0 81.765,49.676 122.45,36.934 18.763,-5.8764 18.001,-40.025 36.666,-46.203 36.01,-11.919 109.95,29.33 109.95,29.33 0,0 -61.747,-75.536 -105.03,-76.4 -26.683,-0.53243 -41.551,35.2 -66.576,44.478 -30.684,11.377 -97.457,11.862 -97.457,11.862 z');
                    }
                    50% {
                        d: path('m 29.054483,293.66937 c 0,0 16.298692,-45.7144 56.983692,-58.4564 18.762995,-5.8764 61.019745,46.01249 79.684745,39.83449 36.01,-11.919 108.70308,-2.46646 108.70308,-2.46646 0,0 -48.65434,-48.10376 -91.93734,-48.96776 -26.683,-0.53243 -87.063584,-23.40524 -112.088584,-14.12724 -30.684,11.377 -41.345593,84.18337 -41.345593,84.18337 z')
                    }
                }

                @keyframes morph-6 {
                    0%, 100% {
                        d: path('m274.42 272.59s-90.612-30.705-107-70.061c-7.5588-18.15 19.09-39.517 11.825-57.786-14.016-35.246-93.141-65.372-93.141-65.372s97.554-1.2532 126.04 31.349c17.56 20.098-0.25597 54.456 8.7219 79.59 11.009 30.818 53.557 82.281 53.557 82.281z');
                    }
                    50% {
                        d: path('m274.42 272.59s-38.936-30.034-55.324-69.39c-7.5588-18.15-71.511-47.57-78.776-65.839-14.016-35.246-11.935-104.97-11.935-104.97s23.06 46.396 51.546 78.999c17.56 20.098 65.514 34.322 74.492 59.456 11.009 30.818 20.001 101.74 20.001 101.74z')
                    }
                }

                @keyframes morph-7 {
                    0%, 100% {
                        d: path('m274.42 272.59s-49.676-81.765-36.934-122.45c5.8763-18.763 40.025-18.001 46.203-36.666 11.919-36.01-29.33-109.95-29.33-109.95s75.536 61.747 76.4 105.03c0.53242 26.683-35.2 41.551-44.478 66.576-11.377 30.684-11.862 97.457-11.862 97.457z');
                    }
                    50% {
                        d: path('m274.42 272.59s-2.0264-52.907 10.716-93.592c5.8763-18.763-23.06-80.415-16.882-99.08 11.919-36.01 82.076-73.709 82.076-73.709s-53.319 36.244-52.455 79.527c0.53242 26.683 40.637 65.04 31.359 90.065-11.377 30.684-54.814 96.786-54.814 96.786z')
                    }
                }

                @keyframes morph-8 {
                    0%, 100% {
                        d: path('m274.42 272.59s71.897-63.119 114.18-57.636c19.498 2.529 24.677 36.291 44.132 39.134 37.532 5.485 103.18-47.976 103.18-47.976s-47.692 85.111-90.169 93.478c-26.186 5.1579-47.033-27.45-73.288-32.242-32.194-5.8754-98.036 5.2416-98.036 5.2416z');
                    }
                    50% {
                        d: path('m274.42 272.59s59.817-22.852 102.1-17.369c19.498 2.529 68.971-42.23 88.426-39.387 37.532 5.485 65.597 82.893 65.597 82.893s-28.229-61.193-70.706-52.826c-26.186 5.1579-58.442 55.098-84.697 50.306-32.194-5.8754-100.72-23.617-100.72-23.617z')
                    }
                }

                @keyframes morph-9 {
                    0%, 100% {
                        d: path('m274.42 272.59s14.504-94.567 50.416-117.54c16.562-10.596 42.231 11.938 58.962 1.611 32.277-19.924 48.205-103.08 48.205-103.08s18.174 95.855-8.9868 129.57c-16.744 20.783-53.674 9.2042-76.866 22.41-28.438 16.193-71.731 67.032-71.731 67.032z');
                    }
                    50% {
                        d: path('m274.42 272.59s43.807-45.167 63.167-69.89c22.398-28.603 44.245-80.005 60.975-90.333 32.277-19.924 109.28 22.42 109.28 22.42s-67.73-27.631-94.89 6.0837c-16.744 20.783-24.145 71.618-47.337 84.824-28.438 16.193-91.194 46.898-91.194 46.898z')
                    }
                }
            }
        }
}
</style>